@startuml
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml
SHOW_LEGEND()
LAYOUT_TOP_DOWN()

' Акторы
Person(customer, "Клиент", "Подаёт заявки на кредит через сайт или интернет-банк")
Person(branch, "Сотрудник офиса", "Продолжает/оформляет заявки в отделении")

' Системы, которые мы поддерживаем
System_Boundary(bank, "Банк «Стандард» — внутренние системы") {
    System(web, "Сайт", "Витрина кредитов, подача онлайн-заявки")
    System(ib, "Интернет-банк", "Подача заявки и предодобренные предложения")
    System(abs, "АБС", "Оформление кредитов, учёт и проводки")
    System(conveyor, "Кредитный конвейер", "Обработка заявок 24/7, BPM (Camunda)")
    System(scoring, "Система кредитного скоринга", "Рассчёт скорингового балла")
    System(sms, "СМС-шлюз", "Отправка уведомлений клиентам")
}

System_Ext(bki, "Бюро кредитных историй", "Внешняя система, API для проверки кредитной истории")

' Взаимодействия клиента
Rel(customer, web, "Просмотр условий, подача заявки")
Rel(customer, ib, "Просмотр условий/офферов, подача заявки")
Rel(scoring, bki, "Запрос кредитной истории")

' Офис
Rel(branch, abs, "Работа с заявками (продолжение/новая)")

' Основные потоки
Rel(web, conveyor, "Передача онлайн-заявки")
Rel(ib, conveyor, "Передача онлайн-заявки / предодобренной")
Rel(conveyor, scoring, "Запрос скоринга при обработке")
Rel(conveyor, abs, "Передача финальных решений (суточный обмен)")
Rel(web, sms, "СМС о регистрации заявки/инструкциях")
Rel(conveyor, sms, "СМС об изменениях статуса")
Rel(ib, sms, "СМС подтверждения (OTP) при подаче")

@enduml
